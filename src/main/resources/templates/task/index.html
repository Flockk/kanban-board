<!DOCTYPE html>
<html lang="eu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Елушев Максим">
  <meta name="description" content="Данный сайт помогает управлять проектами и задачами">
  <link rel="icon" href="../../static/kanban.svg">
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
        crossorigin="anonymous">
  <title>Задачи</title>
</head>
<body>
<div class="container mt-5">
  <h1 class="mb-4">Задачи проекта: <span th:text="${project.title}"></span></h1>
  <a class="btn btn-primary mb-4" th:href="@{/{id}/create(id=${project.id})}">Создать
    задачу</a>
  <div class="row">
    <div class="col-md-4">
      <div class="card text-bg-light mb-3">
        <div class="card-header">BACKLOG</div>
        <div class="card-body w-100">
          <div class="card-group">
            <div th:each="task : ${tasks}" th:if="${task.status == 'BACKLOG'}">
              <div class="card mb-2 bg-transparent border-dark">
                <div class="card-body" style="min-width: 24rem;">
                  <h5 class="card-title" th:text="${task.name}"></h5>
                  <h6 class="card-subtitle mb-4 text-muted"><span>Автор:</span> <span
                      th:text="${task.author}"></span></h6>
                  <h6 class="card-subtitle mb-2 text-muted" th:if="${task.performer != null}">
                    <span>Исполнитель:</span> <span th:text="${task.performer}"></span>
                  </h6>
                </div>
                <div class="btn-group">
                  <button class="btn btn-outline-dark btn-sm dropdown-toggle" type="button"
                          data-bs-toggle="dropdown" aria-expanded="false">
                    Действия
                  </button>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item"
                           th:href="@{/{projId}/{taskId}(projId=${task.project.id}, taskId=${task.id})}">Просмотреть</a>
                    </li>
                    <li><a class="dropdown-item"
                           th:href="@{/{projId}/{taskId}/edit(projId=${task.project.id}, taskId=${task.id})}">Редактировать</a>
                    </li>
                    <li><a class="dropdown-item"
                           th:href="@{/{projId}/{taskId}/delete(projId=${task.project.id}, taskId=${task.id})}"
                           onclick="return confirm('Вы действительно хотите удалить эту задачу?')">Удалить</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-bg-light mb-3">
        <div class="card-header">IN PROGRESS</div>
        <div class="card-body w-100">
          <div class="card-group">
            <div th:each="task : ${tasks}" th:if="${task.status == 'IN_PROGRESS'}">
              <div class="card mb-2 bg-transparent border-dark">
                <div class="card-body" style="min-width: 24rem;">
                  <h5 class="card-title" th:text="${task.name}"></h5>
                  <h6 class="card-subtitle mb-4 text-muted"><span>Автор:</span> <span
                      th:text="${task.author}"></span></h6>
                  <h6 class="card-subtitle mb-2 text-muted" th:if="${task.performer != null}">
                    <span>Исполнитель:</span> <span th:text="${task.performer}"></span>
                  </h6>
                </div>
                <div class="btn-group">
                  <button class="btn btn-outline-dark btn-sm dropdown-toggle" type="button"
                          data-bs-toggle="dropdown" aria-expanded="false">
                    Действия
                  </button>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item"
                           th:href="@{/{projId}/{taskId}(projId=${task.project.id}, taskId=${task.id})}">Просмотреть</a>
                    </li>
                    <li><a class="dropdown-item"
                           th:href="@{/{projId}/{taskId}/edit(projId=${task.project.id}, taskId=${task.id})}">Редактировать</a>
                    </li>
                    <li><a class="dropdown-item"
                           th:href="@{/{projId}/{taskId}/delete(projId=${task.project.id}, taskId=${task.id})}"
                           onclick="return confirm('Вы действительно хотите удалить эту задачу?')">Удалить</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-bg-light mb-3">
        <div class="card-header">DONE</div>
        <div class="card-body w-100">
          <div class="card-group">
            <div th:each="task : ${tasks}" th:if="${task.status == 'DONE'}">
              <div class="card mb-2 bg-transparent border-dark">
                <div class="card-body" style="min-width: 24rem;">
                  <h5 class="card-title" th:text="${task.name}"></h5>
                  <h6 class="card-subtitle mb-4 text-muted"><span>Автор:</span> <span
                      th:text="${task.author}"></span></h6>
                  <h6 class="card-subtitle mb-2 text-muted" th:if="${task.performer != null}">
                    <span>Исполнитель:</span> <span th:text="${task.performer}"></span>
                  </h6>
                </div>
                <div class="btn-group">
                  <button class="btn btn-outline-dark btn-sm dropdown-toggle" type="button"
                          data-bs-toggle="dropdown" aria-expanded="false">
                    Действия
                  </button>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item"
                           th:href="@{/{projId}/{taskId}(projId=${task.project.id}, taskId=${task.id})}">Просмотреть</a>
                    </li>
                    <li><a class="dropdown-item"
                           th:href="@{/{projId}/{taskId}/edit(projId=${task.project.id}, taskId=${task.id})}">Редактировать</a>
                    </li>
                    <li><a class="dropdown-item"
                           th:href="@{/{projId}/{taskId}/delete(projId=${task.project.id}, taskId=${task.id})}"
                           onclick="return confirm('Вы действительно хотите удалить эту задачу?')">Удалить</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <a class="btn btn-secondary" href="/">Назад к проектам</a>
  <br>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
</body>
</html>